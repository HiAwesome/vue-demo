<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>vue02</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>

<div id="app1">
    {{a}}
</div>

<p></p>

<div id="app2">
    <p>{{newTodoText}}</p>
    <p>{{visitCount}}</p>
    <p>{{hideCompletedTodos}}</p>
    <p>{{todos}}</p>
    <p>{{error}}</p>
</div>

<p></p>

<div id="app3">
    <p>{{foo}}</p>
    <!--
        è¿™é‡Œçš„ foo ä¸ä¼šæ›´æ–°
        å‰ç«¯ console æŠ¥é”™:
        [Vue warn]: Error in v-on handler: "TypeError: Cannot assign to read only property 'foo' of object '#<Object>'"
     -->
    <button v-on:click="foo = 'newBar'">Try Change it</button>
</div>

<script type="text/javascript">
    // æ•°æ®ä¸æ–¹æ³•
    // æˆ‘ä»¬çš„æ•°æ®å¯¹è±¡
    var data = {a: 1}

    // è¯¥å¯¹è±¡è¢«åŠ å…¥åˆ°ä¸€ä¸ª Vue å®ä¾‹ä¸­
    var vm = new Vue({
        // é€‰é¡¹
        el: '#app1',
        data: data
    })

    // è·å¾—è¿™ä¸ªå®ä¾‹ä¸Šçš„ property
    // è¿”å›æºæ•°æ®ä¸­å¯¹åº”çš„å­—æ®µ
    // Comparison vm.a == data.a may cause unexpected type coercion
    // æ›¿æ¢æˆä¸‰ä¸ªç­‰äºå·
    vm.a === data.a // => true

    // è®¾ç½® property ä¹Ÿä¼šå½±å“åˆ°åŸå§‹æ•°æ®
    vm.a = 2
    data.a // => 2

    // ... åä¹‹äº¦ç„¶
    data.a = 3
    vm.a // => 3

    vm.b = 'hi'

    vm.$data === data // => true
    vm.$el === document.getElementById('app1') // => true

    // $watch æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•
    vm.$watch('a', function (newValue, oldValue) {
        // è¿™ä¸ªå›è°ƒå°†åœ¨ vm.a æ”¹å˜åè°ƒç”¨
        // æ§åˆ¶å°æ‰“å°ä¸¤ä¸ªå€¼
        console.log('oldValue: ' + oldValue, 'newValue: ' + newValue)
    })

    var vm2 = new Vue({
        el: '#app2',
        data: {
            newTodoText: '',
            visitCount: 0,
            hideCompletedTodos: false,
            todos: [],
            error: null
        }
    })

    vm2.hideCompletedTodos = true
    vm2.todos = ['v', 'u', 'e']

    var obj = {foo: 'bar'}
    // freeze ä¼šé˜»æ­¢ä¿®æ”¹ç°æœ‰çš„ propertyï¼Œä¹Ÿæ„å‘³ç€å“åº”ç³»ç»Ÿæ— æ³•å†è¿½è¸ªå˜åŒ–
    Object.freeze(obj)

    var vm3 = new Vue({
        el: '#app3',
        data: obj
    })
    obj = {foo: '99999'}

    // å®ä¾‹ç”Ÿå‘½å‘¨æœŸé’©å­ğŸª
    new Vue({
        data: {
            a : 1000
        },
        created: function () {
            // this æŒ‡å‘ vm å®ä¾‹
            console.log('a is: ' + this.a)
        }
    });


</script>
</body>
</html>